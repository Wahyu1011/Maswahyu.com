<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Banjari Player</title>
    <style>
      body {
        background-color: #1e1e1e;
        color: white;
        font-family: sans-serif;
        text-align: center;
        padding: 20px;
      }
      .container {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        gap: 10px;
      }
      .ellipse {
        width: 3cm;
        height: 3cm;
        background-color: greenyellow;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 0.5cm;
        color: black;
        cursor: pointer;
        transition: 0.3s;
      }
      .ellipse.active {
        background-color: dodgerblue;
        color: white;
      }
      #nowPlaying {
        margin: 15px 0;
        font-size: 1.1em;
      }
      #progressBar {
        width: 80%;
        height: 10px;
        background: #555;
        border-radius: 5px;
        margin: 10px auto;
        position: relative;
      }
      #progress {
        width: 0%;
        height: 100%;
        background: lime;
        border-radius: 5px;
      }
      #controls {
        margin: 15px 0;
      }
      input[type="range"] {
        width: 200px;
      }
    </style>
  </head>
  <body>
    <h2>Banjari Player</h2>

    <div id="nowPlaying">Belum ada audio diputar</div>

    <div class="container">
      <div class="ellipse" data-audio="audio1" data-name="Awalan (Q)" data-key="q">Awalan</div>
      <div class="ellipse" data-audio="audio2" data-name="Kaidah1 (W)" data-key="w">Kaidah1</div>
      <div class="ellipse" data-audio="audio3" data-name="OFF (E)" data-key="e">OFF</div>
      <div class="ellipse" data-audio="audio4" data-name="Getrak (R)" data-key="r">Getrak</div>
      <!-- Tambah tombol lain sesuai kebutuhan -->
    </div>

    <div id="progressBar"><div id="progress"></div></div>

    <div id="controls">
      <label>Volume: <input type="range" id="volumeSlider" min="0" max="1" step="0.01" value="0.8" /></label><br><br>
      <button onclick="decreaseTempo()">- Tempo</button>
      <span id="tempoDisplay">100%</span>
      <button onclick="increaseTempo()">+ Tempo</button>
      <button onclick="resetTempo()">Reset</button>
      <button onclick="stopCurrentAudio()">Stop</button>
    </div>

    <audio id="audio1" src="audio1.mp3" preload="auto"></audio>
    <audio id="audio2" src="audio2.mp3" preload="auto"></audio>
    <audio id="audio3" src="audio3.mp3" preload="auto"></audio>
    <audio id="audio4" src="audio4.mp3" preload="auto"></audio>

    <script>
      let currentAudio = null;
      let currentTempo = 1;

      function updateTempoDisplay() {
        document.getElementById("tempoDisplay").textContent = Math.round(currentTempo * 100) + "%";
      }

      function stopCurrentAudio() {
        if (currentAudio) {
          currentAudio.pause();
          currentAudio.currentTime = 0;
          currentAudio = null;
        }
        document.getElementById("nowPlaying").textContent = "Belum ada audio diputar";
        document.querySelectorAll(".ellipse").forEach((e) => e.classList.remove("active"));
        document.getElementById("progress").style.width = "0%";
      }

      function playAudio(audioId, name, button) {
        stopCurrentAudio();
        const audio = document.getElementById(audioId);
        audio.playbackRate = currentTempo;
        audio.volume = document.getElementById("volumeSlider").value;
        audio.play();
        currentAudio = audio;

        document.querySelectorAll(".ellipse").forEach((e) => e.classList.remove("active"));
        button.classList.add("active");
        document.getElementById("nowPlaying").textContent = `Now Playing: ${name}`;

        audio.ontimeupdate = () => {
          const progress = (audio.currentTime / audio.duration) * 100;
          document.getElementById("progress").style.width = progress + "%";
        };

        audio.onended = () => stopCurrentAudio();
      }

      function increaseTempo() {
        if (currentTempo < 2) currentTempo += 0.1;
        if (currentAudio) currentAudio.playbackRate = currentTempo;
        updateTempoDisplay();
      }

      function decreaseTempo() {
        if (currentTempo > 0.5) currentTempo -= 0.1;
        if (currentAudio) currentAudio.playbackRate = currentTempo;
        updateTempoDisplay();
      }

      function resetTempo() {
        currentTempo = 1;
        if (currentAudio) currentAudio.playbackRate = currentTempo;
        updateTempoDisplay();
      }

      document.getElementById("volumeSlider").addEventListener("input", function () {
        if (currentAudio) currentAudio.volume = this.value;
      });

      document.querySelectorAll(".ellipse").forEach((el) => {
        el.addEventListener("click", () => {
          playAudio(el.getAttribute("data-audio"), el.getAttribute("data-name"), el);
        });
      });

      document.addEventListener("keydown", (e) => {
        const key = e.key.toLowerCase();
        const btn = document.querySelector(`.ellipse[data-key="${key}"]`);
        if (btn) btn.click();
        if (key === "arrowright") increaseTempo();
        if (key === "arrowleft") decreaseTempo();
      });

      updateTempoDisplay();
    </script>
  </body>
</html>
